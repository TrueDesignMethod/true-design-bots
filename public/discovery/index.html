<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TrueDesign â€” Discovery</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
body { font-family: 'Montserrat', sans-serif; margin: 0; padding: 0; background:#fff8f0; color:#333; }
#bot-container { max-width:600px; margin:40px auto; padding:20px; border-radius:16px; box-shadow:0 4px 12px rgba(0,0,0,0.1); background:white; }
button { background:black; color:white; border:none; border-radius:8px; padding:10px 20px; cursor:pointer; margin-top:10px; }
textarea { width:100%; border-radius:8px; padding:10px; margin-top:10px; resize:none; }
#export-btn { position:fixed; bottom:20px; left:20px; }
</style>
</head>
<body>
<div id="bot-container">
<h1>TRUE Discovery</h1>
<textarea id="user-input" rows="3" placeholder="Share your thoughts or insights from prior sessions..."></textarea>
<button id="send-btn">Send</button>
<pre id="bot-output"></pre>
</div>
<button id="export-btn">Export LifePrint PDF</button>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
const sendBtn = document.getElementById('send-btn');
const userInput = document.getElementById('user-input');
const botOutput = document.getElementById('bot-output');
const exportBtn = document.getElementById('export-btn');

sendBtn.addEventListener('click', async () => {
  const message = userInput.value;
  const res = await fetch('/api/discovery/send', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({message})
  });
  const data = await res.json();
  botOutput.textContent = data.reply || 'No reply';
});

exportBtn.addEventListener('click', () => {
  const element = document.getElementById('bot-container');
  html2pdf().set({filename:'True_Discovery_LifePrint.pdf'}).from(element).save();
});
</script>
</body>
</html>
